var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(){return f("")}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function g(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}let $;function b(t){$=t}function y(){if(!$)throw new Error("Function called outside component initialization");return $}function v(t){y().$$.after_update.push(t)}const w=[],k=[],_=[],x=[],T=Promise.resolve();let D=!1;function U(t){_.push(t)}function E(t){x.push(t)}let S=!1;const M=new Set;function L(){if(!S){S=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];b(e),N(e.$$)}for(b(null),w.length=0;k.length;)k.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];M.has(e)||(M.add(e),e())}_.length=0}while(w.length);for(;x.length;)x.pop()();D=!1,S=!1,M.clear()}}function N(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const I=new Set;let j;function A(){j={r:0,c:[],p:j}}function P(){j.r||o(j.c),j=j.p}function C(t,e){t&&t.i&&(I.delete(t),t.i(e))}function H(t,e,n,o){if(t&&t.o){if(I.has(t))return;I.add(t),j.c.push((()=>{I.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function W(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function O(t){t&&t.c()}function q(t,n,s,l){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=t.$$;c&&c.m(n,s),l||U((()=>{const n=i.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(U)}function B(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(w.push(t),D||(D=!0,T.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,r,s,l,c,u,a,f=[-1]){const d=$;b(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:r.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};a&&a(h.root);let m=!1;if(h.ctx=s?s(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&c(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),m&&z(e,t)),n})):[],h.update(),m=!0,o(h.before_update),h.fragment=!!l&&l(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();r.intro&&C(e.$$.fragment),q(e,r.target,r.anchor,r.customElement),L()}b(d)}class G{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function V(t,e,n){const o=t.slice();return o[8]=e[n],o[9]=e,o[10]=n,o}function X(t,e,n){const o=t.slice();return o[11]=e[n],o[13]=n,o}function Y(t){let e,n,o=t[11]+"";return{c(){e=a("td"),n=f(o),m(e,"class","svelte-14mb56u")},m(t,o){c(t,e,o),l(e,n)},p(t,e){3&e&&o!==(o=t[11]+"")&&p(n,o)},d(t){t&&i(e)}}}function J(t){let e,n,o=t[11]+"";return{c(){e=a("td"),n=f(o),m(e,"class","highlight svelte-14mb56u")},m(t,o){c(t,e,o),l(e,n)},p(t,e){3&e&&o!==(o=t[11]+"")&&p(n,o)},d(t){t&&i(e)}}}function K(t){let e,n,o=t[11]+"",r=t[8];const s=()=>t[5](e,r),u=()=>t[5](null,r);return{c(){e=a("td"),n=f(o),m(e,"class","highlight svelte-14mb56u")},m(t,o){c(t,e,o),l(e,n),s()},p(e,l){t=e,3&l&&o!==(o=t[11]+"")&&p(n,o),r!==t[8]&&(u(),r=t[8],s())},d(t){t&&i(e),u()}}}function Q(t){let e;function n(t,e){return t[13]==t[3][t[8]]?K:t[13]>t[3][t[8]]?J:Y}let o=n(t),r=o(t);return{c(){r.c(),e=h()},m(t,n){r.m(t,n),c(t,e,n)},p(t,s){o===(o=n(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&i(e)}}}function R(t){let e,n,o,r,s,h=t[8]+"",g=t[0][t[8]],$=[];for(let e=0;e<g.length;e+=1)$[e]=Q(X(t,g,e));return{c(){e=a("tr"),n=a("th"),o=f(h),r=d();for(let t=0;t<$.length;t+=1)$[t].c();s=d(),m(n,"class","svelte-14mb56u"),m(e,"class","svelte-14mb56u")},m(t,i){c(t,e,i),l(e,n),l(n,o),l(e,r);for(let t=0;t<$.length;t+=1)$[t].m(e,null);l(e,s)},p(t,n){if(2&n&&h!==(h=t[8]+"")&&p(o,h),15&n){let o;for(g=t[0][t[8]],o=0;o<g.length;o+=1){const r=X(t,g,o);$[o]?$[o].p(r,n):($[o]=Q(r),$[o].c(),$[o].m(e,s))}for(;o<$.length;o+=1)$[o].d(1);$.length=g.length}},d(t){t&&i(e),u($,t)}}}function Z(e){let n,o,r,s=e[1],f=[];for(let t=0;t<s.length;t+=1)f[t]=R(V(e,s,t));return{c(){n=a("div"),o=a("table"),r=a("tbody");for(let t=0;t<f.length;t+=1)f[t].c();m(r,"class","svelte-14mb56u"),m(o,"class","svelte-14mb56u"),m(n,"class","table-container svelte-14mb56u")},m(t,e){c(t,n,e),l(n,o),l(o,r);for(let t=0;t<f.length;t+=1)f[t].m(r,null)},p(t,[e]){if(15&e){let n;for(s=t[1],n=0;n<s.length;n+=1){const o=V(t,s,n);f[n]?f[n].p(o,e):(f[n]=R(o),f[n].c(),f[n].m(r,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=s.length}},i:t,o:t,d(t){t&&i(n),u(f,t)}}}function tt(t,e){return!!t&&e<function(t){const e=new Date,n=t.match(/(1[0-2]|0?[1-9]):([0-5][0-9]) ?([AaPp][Mm])/);if(!n)return e;const o=parseInt(n[1]),r=parseInt(n[2]),s=n[3];e.setMinutes(r),s.match(/[Pp][Mm]/)?e.setHours(o%12+12):(e.setHours(o),(o<5||12==o)&&e.setDate(e.getDate()+1));return e}(t)}function et(t,e){const n=t.findIndex((t=>e(t)));return-1==n?t.length:e(t[n+1])?n:n+1+et(t.slice(n+1),e)}function nt(t,e,n){let o,r,{data:s}=e,{currentTime:l}=e;const c={};return v((()=>{const[t,e]=[window.scrollX,window.scrollY];!function(){const t=c[r[r.length-1]];t&&t.scrollIntoView({inline:"center"})}(),window.scrollTo(t,e)})),t.$$set=t=>{"data"in t&&n(0,s=t.data),"currentTime"in t&&n(4,l=t.currentTime)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s.keys||Object.keys(s)),17&t.$$.dirty&&n(3,o=function(t,e){const n={},o=t=>tt(t,e);for(const e of r)n[e]=et(t[e],o);return n}(s,l))},[s,r,c,o,l,function(t,e){k[t?"unshift":"push"]((()=>{c[e]=t,n(2,c),n(1,r),n(0,s)}))}]}class ot extends G{constructor(t){super(),F(this,t,nt,Z,s,{data:0,currentTime:4})}}function rt(t,e,n){const o=t.slice();return o[10]=e[n],o}function st(e){let n,o,r,s=e[10]+"";return{c(){n=a("option"),o=f(s),n.__value=r=e[10],n.value=n.__value},m(t,e){c(t,n,e),l(n,o)},p:t,d(t){t&&i(n)}}}function lt(t){let e,n,o,r,s,h,$,b,y,v,w,_,x,T,D=t[5],S=[];for(let e=0;e<D.length;e+=1)S[e]=st(rt(t,D,e));function M(e){t[8](e)}let L={data:t[4]};return void 0!==t[0]&&(L.currentTime=t[0]),v=new ot({props:L}),k.push((()=>W(v,"currentTime",M))),{c(){e=a("div"),n=a("a"),o=a("h3"),r=f(t[2]),h=d(),$=a("form"),b=a("select");for(let t=0;t<S.length;t+=1)S[t].c();y=d(),O(v.$$.fragment),m(n,"href",s="srcUrl"in t[1]?t[1].srcUrl:"./"),m(n,"class","svelte-s6fe9e"),void 0===t[3]&&U((()=>t[7].call(b)))},m(s,i){c(s,e,i),l(e,n),l(n,o),l(o,r),l(e,h),l(e,$),l($,b);for(let t=0;t<S.length;t+=1)S[t].m(b,null);var u,a,f,d;g(b,t[3]),l(e,y),q(v,e,null),_=!0,x||(u=b,a="change",f=t[7],u.addEventListener(a,f,d),T=()=>u.removeEventListener(a,f,d),x=!0)},p(t,[e]){if((!_||4&e)&&p(r,t[2]),(!_||2&e&&s!==(s="srcUrl"in t[1]?t[1].srcUrl:"./"))&&m(n,"href",s),32&e){let n;for(D=t[5],n=0;n<D.length;n+=1){const o=rt(t,D,n);S[n]?S[n].p(o,e):(S[n]=st(o),S[n].c(),S[n].m(b,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=D.length}40&e&&g(b,t[3]);const o={};16&e&&(o.data=t[4]),!w&&1&e&&(w=!0,o.currentTime=t[0],E((()=>w=!1))),v.$set(o)},i(t){_||(C(v.$$.fragment,t),_=!0)},o(t){H(v.$$.fragment,t),_=!1},d(t){t&&i(e),u(S,t),B(v),x=!1,T()}}}function ct(t,e,n){let o,{schedule:r}=e,{name:s}=e,{time:l}=e,{breakEndDate:c=new Date("2022-01-31T00:00:00")}=e;const i=r.keys;let u=function(t,e){if(t<c){const t=/break/i,n=e.find((e=>e.match(t)));if(n)return n}let n=/weekday/i;switch(t.getDay()){case 6:n=/weekend|saturday/i;break;case 0:n=/weekend|sunday/i}const o=e.find((t=>t.match(n)));return o||e[0]}(l,i);return t.$$set=t=>{"schedule"in t&&n(1,r=t.schedule),"name"in t&&n(2,s=t.name),"time"in t&&n(0,l=t.time),"breakEndDate"in t&&n(6,c=t.breakEndDate)},t.$$.update=()=>{10&t.$$.dirty&&n(4,o=r[u])},[l,r,s,u,o,i,c,function(){u=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(3,u),n(5,i)},function(t){l=t,n(0,l)}]}class it extends G{constructor(t){super(),F(this,t,ct,lt,s,{schedule:1,name:2,time:0,breakEndDate:6})}}function ut(t,e,n){const o=t.slice();return o[5]=e[n],o}function at(t){let e,n,o=t[0].shuttleNames,r=[];for(let e=0;e<o.length;e+=1)r[e]=dt(ut(t,o,e));const s=t=>H(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=h()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);c(t,e,o),n=!0},p(t,n){if(3&n){let l;for(o=t[0].shuttleNames,l=0;l<o.length;l+=1){const s=ut(t,o,l);r[l]?(r[l].p(s,n),C(r[l],1)):(r[l]=dt(s),r[l].c(),C(r[l],1),r[l].m(e.parentNode,e))}for(A(),l=o.length;l<r.length;l+=1)s(l);P()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)C(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)H(r[t]);n=!1},d(t){u(r,t),t&&i(e)}}}function ft(e){let n;return{c(){n=a("p"),n.textContent="Waiting for data to load..."},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&i(n)}}}function dt(t){let e,n,o;function r(e){t[4](e)}let s={name:t[5],schedule:t[0][t[5]]};return void 0!==t[1]&&(s.time=t[1]),e=new it({props:s}),k.push((()=>W(e,"time",r))),{c(){O(e.$$.fragment)},m(t,n){q(e,t,n),o=!0},p(t,o){const r={};1&o&&(r.name=t[5]),1&o&&(r.schedule=t[0][t[5]]),!n&&2&o&&(n=!0,r.time=t[1],E((()=>n=!1))),e.$set(r)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){B(e,t)}}}function ht(t){let e,n,o,r,s,u,h,g,$,b,y,v,w,k,_,x,T,D,U,E,S,M,L,N,I,j,W=t[1].toLocaleDateString("en-US",t[2])+"",O=t[0].buildDate+"";const q=[ft,at],B=[];function z(t,e){return t[0]?1:0}return b=z(t),y=B[b]=q[b](t),{c(){e=a("main"),n=a("a"),n.innerHTML='<h2 class="svelte-91yl1g">WashU Shuttles</h2>',o=d(),r=a("p"),r.innerHTML='A sane alternative to Washington University in St. Louis\n    <a href="https://parking.wustl.edu/campus-shuttle-system/" class="svelte-91yl1g">Parking &amp; Transportation&#39;s shuttle schedule website\n    </a>.',s=d(),u=a("p"),h=f(W),g=d(),$=a("section"),y.c(),v=d(),w=a("br"),k=d(),_=a("footer"),x=a("p"),T=f("Data built from\n      "),D=a("a"),D.textContent="WashU Parking & Transportation",U=f("\n      and\n      "),E=a("a"),E.textContent="Metro STL",S=f("\n      on "),M=f(O),L=f("."),N=d(),I=a("p"),I.innerHTML='This site is the result of my frustration with WashU Parking &amp;\n      Transportation&#39;s website and my attempt at a more accessible bus schedule\n      table for myself. If anything is not accurate or if you have any\n      suggestions for improvement, please email me at tnie at wustl dot edu.\n      Source code hosted on Github:\n      <a href="https://github.com/kwsp/washu-shuttles/" class="svelte-91yl1g">https://github.com/kwsp/washu-shuttles/</a>',m(n,"href","./"),m(n,"class","svelte-91yl1g"),m(D,"href","https://parking.wustl.edu/campus-shuttle-system/"),m(D,"class","svelte-91yl1g"),m(E,"href","https://www.metrostlouis.org/"),m(E,"class","svelte-91yl1g"),m(e,"class","svelte-91yl1g")},m(t,i){c(t,e,i),l(e,n),l(e,o),l(e,r),l(e,s),l(e,u),l(u,h),l(e,g),l(e,$),B[b].m($,null),l(e,v),l(e,w),l(e,k),l(e,_),l(_,x),l(x,T),l(x,D),l(x,U),l(x,E),l(x,S),l(x,M),l(x,L),l(_,N),l(_,I),j=!0},p(t,[e]){(!j||2&e)&&W!==(W=t[1].toLocaleDateString("en-US",t[2])+"")&&p(h,W);let n=b;b=z(t),b===n?B[b].p(t,e):(A(),H(B[n],1,1,(()=>{B[n]=null})),P(),y=B[b],y?y.p(t,e):(y=B[b]=q[b](t),y.c()),C(y,1),y.m($,null)),(!j||1&e)&&O!==(O=t[0].buildDate+"")&&p(M,O)},i(t){j||(C(y),j=!0)},o(t){H(y),j=!1},d(t){t&&i(e),B[b].d()}}}function mt(t,e,n){let{apiUrl:o}=e,r={shuttleNames:[],buildDate:""},s=new Date;var l;return l=()=>{setInterval((()=>{const t=new Date;t.getMinutes()!=s.getMinutes()&&n(1,s=t)}),2e3)},y().$$.on_mount.push(l),v((()=>{window.scrollTo(0,0)})),fetch(o).then((t=>t.json())).then((t=>{n(0,r=t)})).catch((t=>console.log(t))),t.$$set=t=>{"apiUrl"in t&&n(3,o=t.apiUrl)},[r,s,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},o,function(t){s=t,n(1,s)}]}return new class extends G{constructor(t){super(),F(this,t,mt,ht,s,{apiUrl:3})}}({target:document.body,props:{apiUrl:"./data.json"}})}();
//# sourceMappingURL=bundle.js.map
