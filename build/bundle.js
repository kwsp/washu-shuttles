var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(){return f("")}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function g(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}let $;function b(t){$=t}function y(){if(!$)throw new Error("Function called outside component initialization");return $}function v(t){y().$$.after_update.push(t)}const w=[],_=[],k=[],x=[],T=Promise.resolve();let D=!1;function U(t){k.push(t)}function E(t){x.push(t)}let S=!1;const M=new Set;function N(){if(!S){S=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];b(e),I(e.$$)}for(b(null),w.length=0;_.length;)_.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];M.has(e)||(M.add(e),e())}k.length=0}while(w.length);for(;x.length;)x.pop()();D=!1,S=!1,M.clear()}}function I(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const L=new Set;let j;function C(){j={r:0,c:[],p:j}}function A(){j.r||o(j.c),j=j.p}function P(t,e){t&&t.i&&(L.delete(t),t.i(e))}function H(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),j.c.push((()=>{L.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function O(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function W(t){t&&t.c()}function q(t,n,c,l){const{fragment:s,on_mount:u,on_destroy:i,after_update:a}=t.$$;s&&s.m(n,c),l||U((()=>{const n=u.map(e).filter(r);i?i.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(U)}function B(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(w.push(t),D||(D=!0,T.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,r,c,l,s,i,a,f=[-1]){const d=$;b(e);const h=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:r.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};a&&a(h.root);let m=!1;if(h.ctx=c?c(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),m&&z(e,t)),n})):[],h.update(),m=!0,o(h.before_update),h.fragment=!!l&&l(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();r.intro&&P(e.$$.fragment),q(e,r.target,r.anchor,r.customElement),N()}b(d)}class G{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function V(t,e,n){const o=t.slice();return o[8]=e[n],o[9]=e,o[10]=n,o}function X(t,e,n){const o=t.slice();return o[11]=e[n],o[13]=n,o}function Y(t){let e,n,o=t[11]+"";return{c(){e=a("td"),n=f(o),m(e,"class","svelte-14mb56u")},m(t,o){s(t,e,o),l(e,n)},p(t,e){3&e&&o!==(o=t[11]+"")&&p(n,o)},d(t){t&&u(e)}}}function J(t){let e,n,o=t[11]+"";return{c(){e=a("td"),n=f(o),m(e,"class","highlight svelte-14mb56u")},m(t,o){s(t,e,o),l(e,n)},p(t,e){3&e&&o!==(o=t[11]+"")&&p(n,o)},d(t){t&&u(e)}}}function K(t){let e,n,o=t[11]+"",r=t[8];const c=()=>t[5](e,r),i=()=>t[5](null,r);return{c(){e=a("td"),n=f(o),m(e,"class","highlight svelte-14mb56u")},m(t,o){s(t,e,o),l(e,n),c()},p(e,l){t=e,3&l&&o!==(o=t[11]+"")&&p(n,o),r!==t[8]&&(i(),r=t[8],c())},d(t){t&&u(e),i()}}}function Q(t){let e;function n(t,e){return t[13]==t[3][t[8]]?K:t[13]>t[3][t[8]]?J:Y}let o=n(t),r=o(t);return{c(){r.c(),e=h()},m(t,n){r.m(t,n),s(t,e,n)},p(t,c){o===(o=n(t))&&r?r.p(t,c):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&u(e)}}}function R(t){let e,n,o,r,c,h=t[8]+"",g=t[0][t[8]],$=[];for(let e=0;e<g.length;e+=1)$[e]=Q(X(t,g,e));return{c(){e=a("tr"),n=a("th"),o=f(h),r=d();for(let t=0;t<$.length;t+=1)$[t].c();c=d(),m(n,"class","svelte-14mb56u"),m(e,"class","svelte-14mb56u")},m(t,u){s(t,e,u),l(e,n),l(n,o),l(e,r);for(let t=0;t<$.length;t+=1)$[t].m(e,null);l(e,c)},p(t,n){if(2&n&&h!==(h=t[8]+"")&&p(o,h),15&n){let o;for(g=t[0][t[8]],o=0;o<g.length;o+=1){const r=X(t,g,o);$[o]?$[o].p(r,n):($[o]=Q(r),$[o].c(),$[o].m(e,c))}for(;o<$.length;o+=1)$[o].d(1);$.length=g.length}},d(t){t&&u(e),i($,t)}}}function Z(e){let n,o,r,c=e[1],f=[];for(let t=0;t<c.length;t+=1)f[t]=R(V(e,c,t));return{c(){n=a("div"),o=a("table"),r=a("tbody");for(let t=0;t<f.length;t+=1)f[t].c();m(r,"class","svelte-14mb56u"),m(o,"class","svelte-14mb56u"),m(n,"class","table-container svelte-14mb56u")},m(t,e){s(t,n,e),l(n,o),l(o,r);for(let t=0;t<f.length;t+=1)f[t].m(r,null)},p(t,[e]){if(15&e){let n;for(c=t[1],n=0;n<c.length;n+=1){const o=V(t,c,n);f[n]?f[n].p(o,e):(f[n]=R(o),f[n].c(),f[n].m(r,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=c.length}},i:t,o:t,d(t){t&&u(n),i(f,t)}}}function tt(t,e){return!!t&&e<function(t){const e=new Date,n=t.match(/(1[0-2]|0?[1-9]):([0-5][0-9]) ?([AaPp][Mm])/);if(!n)return e;const o=parseInt(n[1]),r=parseInt(n[2]),c=n[3];e.setMinutes(r),c.match(/[Pp][Mm]/)?e.setHours(o%12+12):(e.setHours(o),(o<5||12==o)&&e.setDate(e.getDate()+1));return e}(t)}function et(t,e){const n=t.findIndex((t=>e(t)));return-1==n?t.length:e(t[n+1])?n:n+1+et(t.slice(n+1),e)}function nt(t,e,n){let o,r,{data:c}=e,{currentTime:l}=e;const s={};return v((()=>{const[t,e]=[window.scrollX,window.scrollY];!function(){const t=s[r[r.length-1]];t&&t.scrollIntoView({inline:"center"})}(),window.scrollTo(t,e)})),t.$$set=t=>{"data"in t&&n(0,c=t.data),"currentTime"in t&&n(4,l=t.currentTime)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=c.keys||Object.keys(c)),17&t.$$.dirty&&n(3,o=function(t,e){const n={},o=t=>tt(t,e);for(const e of r)n[e]=et(t[e],o);return n}(c,l))},[c,r,s,o,l,function(t,e){_[t?"unshift":"push"]((()=>{s[e]=t,n(2,s),n(1,r),n(0,c)}))}]}class ot extends G{constructor(t){super(),F(this,t,nt,Z,c,{data:0,currentTime:4})}}function rt(t,e,n){const o=t.slice();return o[9]=e[n],o}function ct(e){let n,o,r,c=e[9]+"";return{c(){n=a("option"),o=f(c),n.__value=r=e[9],n.value=n.__value},m(t,e){s(t,n,e),l(n,o)},p:t,d(t){t&&u(n)}}}function lt(t){let e,n,o,r,c,h,$,b,y,v,w,k,x,T,D=t[5],S=[];for(let e=0;e<D.length;e+=1)S[e]=ct(rt(t,D,e));function M(e){t[8](e)}let N={data:t[4]};return void 0!==t[0]&&(N.currentTime=t[0]),v=new ot({props:N}),_.push((()=>O(v,"currentTime",M))),{c(){e=a("div"),n=a("a"),o=a("h3"),r=f(t[2]),h=d(),$=a("form"),b=a("select");for(let t=0;t<S.length;t+=1)S[t].c();y=d(),W(v.$$.fragment),m(n,"href",c="srcUrl"in t[1]?t[1].srcUrl:"./"),m(n,"class","svelte-s6fe9e"),void 0===t[3]&&U((()=>t[7].call(b)))},m(c,u){s(c,e,u),l(e,n),l(n,o),l(o,r),l(e,h),l(e,$),l($,b);for(let t=0;t<S.length;t+=1)S[t].m(b,null);var i,a,f,d;g(b,t[3]),l(e,y),q(v,e,null),k=!0,x||(i=b,a="change",f=t[7],i.addEventListener(a,f,d),T=()=>i.removeEventListener(a,f,d),x=!0)},p(t,[e]){if((!k||4&e)&&p(r,t[2]),(!k||2&e&&c!==(c="srcUrl"in t[1]?t[1].srcUrl:"./"))&&m(n,"href",c),32&e){let n;for(D=t[5],n=0;n<D.length;n+=1){const o=rt(t,D,n);S[n]?S[n].p(o,e):(S[n]=ct(o),S[n].c(),S[n].m(b,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=D.length}40&e&&g(b,t[3]);const o={};16&e&&(o.data=t[4]),!w&&1&e&&(w=!0,o.currentTime=t[0],E((()=>w=!1))),v.$set(o)},i(t){k||(P(v.$$.fragment,t),k=!0)},o(t){H(v.$$.fragment,t),k=!1},d(t){t&&u(e),i(S,t),B(v),x=!1,T()}}}function st(t,e,n){let o,{schedule:r}=e,{name:c}=e,{time:l}=e,{breakEndDate:s=new Date("2022-01-31T00:00:00")}=e;const u=r.keys;let i=function(t,e){let n=/weekday/i;switch(t.getDay()){case 6:n=/weekend|saturday/i;break;case 0:n=/weekend|sunday/i}return e.find((t=>t.match(n)))||e[0]}(l,u);return t.$$set=t=>{"schedule"in t&&n(1,r=t.schedule),"name"in t&&n(2,c=t.name),"time"in t&&n(0,l=t.time),"breakEndDate"in t&&n(6,s=t.breakEndDate)},t.$$.update=()=>{10&t.$$.dirty&&n(4,o=r[i])},[l,r,c,i,o,u,s,function(){i=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(3,i),n(5,u)},function(t){l=t,n(0,l)}]}class ut extends G{constructor(t){super(),F(this,t,st,lt,c,{schedule:1,name:2,time:0,breakEndDate:6})}}function it(t,e,n){const o=t.slice();return o[5]=e[n],o}function at(t){let e,n,o=t[0].shuttleNames,r=[];for(let e=0;e<o.length;e+=1)r[e]=dt(it(t,o,e));const c=t=>H(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=h()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);s(t,e,o),n=!0},p(t,n){if(3&n){let l;for(o=t[0].shuttleNames,l=0;l<o.length;l+=1){const c=it(t,o,l);r[l]?(r[l].p(c,n),P(r[l],1)):(r[l]=dt(c),r[l].c(),P(r[l],1),r[l].m(e.parentNode,e))}for(C(),l=o.length;l<r.length;l+=1)c(l);A()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)P(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)H(r[t]);n=!1},d(t){i(r,t),t&&u(e)}}}function ft(e){let n;return{c(){n=a("p"),n.textContent="Waiting for data to load..."},m(t,e){s(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function dt(t){let e,n,o;function r(e){t[4](e)}let c={name:t[5],schedule:t[0][t[5]]};return void 0!==t[1]&&(c.time=t[1]),e=new ut({props:c}),_.push((()=>O(e,"time",r))),{c(){W(e.$$.fragment)},m(t,n){q(e,t,n),o=!0},p(t,o){const r={};1&o&&(r.name=t[5]),1&o&&(r.schedule=t[0][t[5]]),!n&&2&o&&(n=!0,r.time=t[1],E((()=>n=!1))),e.$set(r)},i(t){o||(P(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){B(e,t)}}}function ht(t){let e,n,o,r,c,i,h,g,$,b,y,v,w,_,k,x,T,D,U,E,S,M,N,I,L,j=t[1].toLocaleDateString("en-US",t[2])+"",O=t[0].buildDate+"";const W=[ft,at],q=[];function B(t,e){return t[0]?1:0}return $=B(t),b=q[$]=W[$](t),{c(){e=a("main"),n=a("a"),n.innerHTML='<h2 class="svelte-91yl1g">WashU Shuttles</h2>',o=d(),r=a("p"),c=f("Current time: "),i=f(j),h=d(),g=a("section"),b.c(),y=d(),v=a("br"),w=d(),_=a("section"),_.innerHTML='<p>This site is my attempt at a more accessible shuttle schedule page than\n      WashU Parking &amp; Transportation&#39;s website. If anything is not accurate or\n      if you have any suggestions for improvement, please email me at tnie at\n      wustl dot edu. Source code hosted on Github:\n      <a href="https://github.com/kwsp/washu-shuttles/" class="svelte-91yl1g">https://github.com/kwsp/washu-shuttles/</a></p>',k=d(),x=a("footer"),T=a("p"),D=f("Data built from\n      "),U=a("a"),U.textContent="WashU Parking & Transportation",E=f("\n      and\n      "),S=a("a"),S.textContent="Metro STL",M=f("\n      on "),N=f(O),I=f("."),m(n,"href","./"),m(n,"class","svelte-91yl1g"),m(U,"href","https://parking.wustl.edu/campus-shuttle-system/"),m(U,"class","svelte-91yl1g"),m(S,"href","https://www.metrostlouis.org/"),m(S,"class","svelte-91yl1g"),m(e,"class","svelte-91yl1g")},m(t,u){s(t,e,u),l(e,n),l(e,o),l(e,r),l(r,c),l(r,i),l(e,h),l(e,g),q[$].m(g,null),l(e,y),l(e,v),l(e,w),l(e,_),l(e,k),l(e,x),l(x,T),l(T,D),l(T,U),l(T,E),l(T,S),l(T,M),l(T,N),l(T,I),L=!0},p(t,[e]){(!L||2&e)&&j!==(j=t[1].toLocaleDateString("en-US",t[2])+"")&&p(i,j);let n=$;$=B(t),$===n?q[$].p(t,e):(C(),H(q[n],1,1,(()=>{q[n]=null})),A(),b=q[$],b?b.p(t,e):(b=q[$]=W[$](t),b.c()),P(b,1),b.m(g,null)),(!L||1&e)&&O!==(O=t[0].buildDate+"")&&p(N,O)},i(t){L||(P(b),L=!0)},o(t){H(b),L=!1},d(t){t&&u(e),q[$].d()}}}function mt(t,e,n){let{apiUrl:o}=e,r={shuttleNames:[],buildDate:""},c=new Date;var l;return l=()=>{setInterval((()=>{const t=new Date;t.getMinutes()!=c.getMinutes()&&n(1,c=t)}),2e3)},y().$$.on_mount.push(l),v((()=>{window.scrollTo(0,0)})),fetch(o).then((t=>t.json())).then((t=>{n(0,r=t)})).catch((t=>console.log(t))),t.$$set=t=>{"apiUrl"in t&&n(3,o=t.apiUrl)},[r,c,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},o,function(t){c=t,n(1,c)}]}return new class extends G{constructor(t){super(),F(this,t,mt,ht,c,{apiUrl:3})}}({target:document.body,props:{apiUrl:"./data.json"}})}();
//# sourceMappingURL=bundle.js.map
